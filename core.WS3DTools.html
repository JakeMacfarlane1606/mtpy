

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>WS3DTools: working with WS3DMTINV &mdash; MTpy 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="MTpy 0.1 documentation" href="index.html" />
    <link rel="next" title="WinglinkTools: work with WinGLink MT inversion software" href="core.WinglinkTools.html" />
    <link rel="prev" title="OCCAMTools: an interface to Scripp’s Occam inversion program" href="core.OCCAMTools.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="core.WinglinkTools.html" title="WinglinkTools: work with WinGLink MT inversion software"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="core.OCCAMTools.html" title="OCCAMTools: an interface to Scripp’s Occam inversion program"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">MTpy 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-MTpy.core.WS3DTools">
<span id="ws3dtools-working-with-ws3dmtinv"></span><h1>WS3DTools: working with WS3DMTINV<a class="headerlink" href="#module-MTpy.core.WS3DTools" title="Permalink to this headline">¶</a></h1>
<p>Created on Mon Apr 02 11:54:33 2012</p>
<p>&#64;author: a1185872</p>
<dl class="class">
<dt id="MTpy.core.WS3DTools.ListPeriods">
<em class="property">class </em><tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">ListPeriods</tt><big>(</big><em>fig</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#ListPeriods"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.ListPeriods" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="MTpy.core.WS3DTools.ListPeriods.__init__">
<tt class="descname">__init__</tt><big>(</big><em>fig</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#ListPeriods.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.ListPeriods.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="MTpy.core.WS3DTools.ListPeriods.__module__">
<tt class="descname">__module__</tt><em class="property"> = 'MTpy.core.WS3DTools'</em><a class="headerlink" href="#MTpy.core.WS3DTools.ListPeriods.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="MTpy.core.WS3DTools.ListPeriods.connect">
<tt class="descname">connect</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#ListPeriods.connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.ListPeriods.connect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="MTpy.core.WS3DTools.ListPeriods.disconnect">
<tt class="descname">disconnect</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#ListPeriods.disconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.ListPeriods.disconnect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="MTpy.core.WS3DTools.ListPeriods.onclick">
<tt class="descname">onclick</tt><big>(</big><em>event</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#ListPeriods.onclick"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.ListPeriods.onclick" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="MTpy.core.WS3DTools.getPeriods">
<tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">getPeriods</tt><big>(</big><em>edipath</em>, <em>errthresh=10</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#getPeriods"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.getPeriods" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots periods for all stations in edipath and the plot is interactive, just
clikc on the period you want to select and it will appear in the console,
it will also be saved to lp.plst.  To sort this list type lp.plst.sort()</p>
<p>The x&#8217;s mark a conformation that the station contains that period.  So 
when looking for the best periods to invert for look for a dense line of 
x&#8217;s</p>
<dl class="docutils">
<dt>Inputs:</dt>
<dd><dl class="first last docutils">
<dt>edipath = path to where all your edi files are.  Note that only the </dt>
<dd>impedance components are supported so if you have spectra data, 
export them from wingling to have impedance information.</dd>
<dt>errthresh = threshold on the error in impedance estimation, this just </dt>
<dd>gives an indication on where bad stations and bad periods
are, anything above this level will be colored in red.</dd>
</dl>
</dd>
<dt>Outputs:</dt>
<dd><p class="first">periodlst = list of periods for each station
errorlst = error in the impedance determinant for each station at</p>
<blockquote>
<div>each period.</div></blockquote>
<dl class="last docutils">
<dt>lp = data type lp has attributes: </dt>
<dd><dl class="first last docutils">
<dt>plst = period list of chosen periods, again to sort this list type</dt>
<dd>lp.plst.sort().  this will then be the input to make the 
data file later.</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="MTpy.core.WS3DTools.getXY">
<tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">getXY</tt><big>(</big><em>sitesfn</em>, <em>outfn</em>, <em>ncol=5</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#getXY"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.getXY" title="Permalink to this definition">¶</a></dt>
<dd><p>get x (e-w) and y (n-s) position of station and put in middle of cell</p>
<dl class="docutils">
<dt>Input:</dt>
<dd>sitesfn = full path to sites file output from winglink
outfn = full path to .out file output from winglink
ncol = number of columns the data is in</dd>
<dt>Outputs:</dt>
<dd><dl class="first last docutils">
<dt>xarr = array of relative distance for each station from center of the</dt>
<dd>grid.  Note this is E-W direction</dd>
<dt>yarr = array of relative distance for each station from center of the</dt>
<dd>grid.  Note this is N-S direction</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="MTpy.core.WS3DTools.plotDataResPhase">
<tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">plotDataResPhase</tt><big>(</big><em>datafn</em>, <em>respfn=None</em>, <em>sitesfn=None</em>, <em>plottype='1'</em>, <em>plotnum=1</em>, <em>dpi=150</em>, <em>units='mv'</em>, <em>colormode='color'</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#plotDataResPhase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.plotDataResPhase" title="Permalink to this definition">¶</a></dt>
<dd><p>plot responses from the data file and if there is a response file</p>
<dl class="docutils">
<dt>Inputs:</dt>
<dd><p class="first">datafn = fullpath to data file
respfn = full path to respsonse file, if not input, just the data is</p>
<blockquote>
<div>plotted. Can be a list of response files from the same 
inversion</div></blockquote>
<dl class="last docutils">
<dt>plottype= &#8216;1&#8217; to plot each station in a different window</dt>
<dd>[stations] for list of stations to plot (stations are numbers)</dd>
<dt>plotnum = 1 for just xy,yx</dt>
<dd>2 for all components</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="MTpy.core.WS3DTools.plotTensorMaps">
<tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">plotTensorMaps</tt><big>(</big><em>datafn, respfn=None, sitesfn=None, periodlst=None, esize=(1, 1, 5, 5), ecolor='phimin', colormm=[(0, 90), (0, 1), (0, 4), (-2, 2)], xpad=0.5, units='mv', dpi=150</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#plotTensorMaps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.plotTensorMaps" title="Permalink to this definition">¶</a></dt>
<dd><p>plot phase tensor maps for data and or response, each figure is of a
different period.  If response is input a third column is added which is 
the residual phase tensor showing where the model is not fitting the data 
well.  The data is plotted in km in units of ohm-m.</p>
<dl class="docutils">
<dt>Inputs:</dt>
<dd><p class="first">datafn = full path to data file
respfn = full path to response file, if none just plots data
sitesfn = full path to sites file
periodlst = indicies of periods you want to plot
esize = size of ellipses as:</p>
<blockquote>
<div>0 = phase tensor ellipse
1 = phase tensor residual
2 = resistivity tensor ellipse
3 = resistivity tensor residual</div></blockquote>
<p>ecolor = &#8216;phimin&#8217; for coloring with phimin or &#8216;beta&#8217; for beta coloring
colormm = list of min and max coloring for plot, list as follows:</p>
<blockquote>
<div><p>0 = phase tensor min and max for ecolor in degrees
1 = phase tensor residual min and max [0,1]
2 = resistivity tensor coloring as resistivity on log scale
3 = resistivity tensor residual coloring as resistivity on</p>
<blockquote>
<div>linear scale</div></blockquote>
</div></blockquote>
<p class="last">xpad = padding of map from stations at extremities (km)
units = &#8216;mv&#8217; to convert to Ohm-m 
dpi = dots per inch of figure</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="MTpy.core.WS3DTools.readDataFile">
<tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">readDataFile</tt><big>(</big><em>datafn</em>, <em>sitesfn=None</em>, <em>units='mv'</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#readDataFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.readDataFile" title="Permalink to this definition">¶</a></dt>
<dd><p>read in data file</p>
<dl class="docutils">
<dt>Inputs:</dt>
<dd>datafn = full path to data file
sitesfn = full path to sites file output by winglink
units = &#8216;mv&#8217; always</dd>
<dt>Outputs:</dt>
<dd><p class="first">period = list of periods used for the inversion
zarr = array of impedance values</p>
<blockquote>
<div>(number of staitons x number of periods x 2 x 2)</div></blockquote>
<p class="last">zerr = array of errors in impedance component
nsarr = station locations relative distance from center of grid in N-S
ewarr = station locations relative distance from center of grid in E-W
sitelst = list of sites used in data</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="MTpy.core.WS3DTools.readModelFile">
<tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">readModelFile</tt><big>(</big><em>mfile</em>, <em>ncol=7</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#readModelFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.readModelFile" title="Permalink to this definition">¶</a></dt>
<dd><p>read in a model file</p>
</dd></dl>

<dl class="function">
<dt id="MTpy.core.WS3DTools.readSitesFile">
<tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">readSitesFile</tt><big>(</big><em>sitesfn</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#readSitesFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.readSitesFile" title="Permalink to this definition">¶</a></dt>
<dd><p>read <a href="#id1"><span class="problematic" id="id2">sites_</span></a> file output from winglink</p>
<dl class="docutils">
<dt>Input: </dt>
<dd>sitesfn = full path to the sites file output by winglink</dd>
<dt>Output:</dt>
<dd><dl class="first docutils">
<dt>slst = list of dictionaries for each station.  Keys include:</dt>
<dd>station = station name
dx = number of blocks from center of grid in East-West direction
dy = number of blocks from center of grid in North-South direction
dz = number of blocks from center of grid vertically
number = block number in the grid</dd>
</dl>
<p class="last">sitelst = list of station names</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="MTpy.core.WS3DTools.readWLOutFile">
<tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">readWLOutFile</tt><big>(</big><em>outfn</em>, <em>ncol=5</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#readWLOutFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.readWLOutFile" title="Permalink to this definition">¶</a></dt>
<dd><p>read .out file from winglink</p>
<dl class="docutils">
<dt>Inputs:</dt>
<dd>outfn = full path to .out file from winglink</dd>
<dt>Outputs:</dt>
<dd><dl class="first last docutils">
<dt>dx,dy,dz = cell nodes in x,y,z directions (note x is to the East here</dt>
<dd>and y is to the north.)</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="MTpy.core.WS3DTools.writeInit3DFile">
<tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">writeInit3DFile</tt><big>(</big><em>outfn</em>, <em>rhostart=100</em>, <em>ncol=5</em>, <em>savepath=None</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#writeInit3DFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.writeInit3DFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an init3d file for WSINV3D</p>
<dl class="docutils">
<dt>Inputs:</dt>
<dd>outfn = full path to .out file from winglink
rhostart = starting homogeneous half space in Ohm-m
ncol = number of columns for data to be written in
savepath = full path to save the init file</dd>
<dt>Output:</dt>
<dd>ifile = full path to init file</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="MTpy.core.WS3DTools.writeStartupFile">
<tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">writeStartupFile</tt><big>(</big><em>datafn, initialfn=None, outputfn=None, savepath=None, apriorfn=None, modells=[5, 0.3, 0.3, 0.3], targetrms=1.0, control=None, maxiter=10, errortol=None, staticfn=None, lagrange=None</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#writeStartupFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.writeStartupFile" title="Permalink to this definition">¶</a></dt>
<dd><p>makes a startup file for WSINV3D t.  Most of these parameters are not input</p>
<dl class="docutils">
<dt>Inputs:</dt>
<dd>datafn = full path to the data file written for inversion
initialfn = full path to init file
outputfn = output stem to which the _model and _resp will be written
savepath = full path to save the startup file to
apriorfn = full path to apriori model
modells = smoothing parameters 
targetrms = target rms
control = something
maxiter = maximum number of iterations
errotol = error tolerance for the computer?
staticfn = full path to static shift file name
lagrange = starting lagrange multiplier</dd>
<dt>Outputs:</dt>
<dd>sfile = full path to startup file</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="MTpy.core.WS3DTools.writeWSDataFile">
<tt class="descclassname">MTpy.core.WS3DTools.</tt><tt class="descname">writeWSDataFile</tt><big>(</big><em>sitesfn, outfn, periodlst, edipath, zerr=0.05, ptol=0.15, zerrmap=[10, 1, 1, 10], savepath=None, ncol=5, units='mv'</em><big>)</big><a class="reference internal" href="_modules/MTpy/core/WS3DTools.html#writeWSDataFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#MTpy.core.WS3DTools.writeWSDataFile" title="Permalink to this definition">¶</a></dt>
<dd><p>writes a data file for WSINV3D from winglink outputs</p>
<dl class="docutils">
<dt>Inputs:</dt>
<dd><p class="first">sitesfn = sites filename (full path)
outfn = winglink .out file
periodlst = periods to extract from edifiles can get them from</p>
<blockquote>
<div>using the function getPeriods.</div></blockquote>
<p>edipath = path to edifiles
savepath = directory or full path to save data file to, default path</p>
<blockquote>
<div>is dirname sitesfn.  saves as: savepath/WSDataFile.dat</div></blockquote>
<p>zerr = percent error to give to impedance tensor components
ptol = percent tolerance to locate frequencies in case edi files don&#8217;t</p>
<blockquote>
<div>have the same frequencies.  Need to add interpolation</div></blockquote>
<dl class="docutils">
<dt>zerrmap = multiple to multiply err of zxx,zxy,zyx,zyy by.</dt>
<dd>Note the total error is zerr*zerrmap[ii]</dd>
</dl>
<p class="last">ncol = number of columns in outfn</p>
</dd>
<dt>Outputs:</dt>
<dd><dl class="first last docutils">
<dt>datafn = full path to data file, saved in dirname(sitesfn) or savepath</dt>
<dd>where savepath can be a directory or full filename</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="core.OCCAMTools.html"
                        title="previous chapter">OCCAMTools: an interface to Scripp&#8217;s Occam inversion program</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="core.WinglinkTools.html"
                        title="next chapter">WinglinkTools: work with WinGLink MT inversion software</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/core.WS3DTools.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="core.WinglinkTools.html" title="WinglinkTools: work with WinGLink MT inversion software"
             >next</a> |</li>
        <li class="right" >
          <a href="core.OCCAMTools.html" title="OCCAMTools: an interface to Scripp’s Occam inversion program"
             >previous</a> |</li>
        <li><a href="index.html">MTpy 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Jared Peacock, Lars Krieger, Stephan Thiel, Kent Inverarity.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>